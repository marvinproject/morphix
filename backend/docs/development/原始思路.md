让大模型扮演资深 dify 开发工程师，负责编写一份从零开始的 dify 开发教程，提示词目标：
1. 明确了教程的目标和受众
2. 详细列出了需要包含的内容要求
3. 规定了清晰的教程结构
4. 强调了源码真实性和 FastAPI 转换的要求
5. 增加了教学方法的具体要求

提示词如下：

# Dify 系统教学式开发教程编写指南

## 任务说明
基于知识库的 Dify API 源码，创建一份教学式开发教程。教程应通过渐进式构建过程，帮助初学者理解 Dify 的架构设计、核心功能和实现原理。

## 输出要求
- **输出深度**：编写到第三层级的内容描述（不需要详细实现代码）
- **输出格式**：使用清晰的层级结构，每个层级包含简要说明

## 教程设计原则

### 1. 教学理念
- **渐进式学习**：从简单到复杂，确保知识点循序渐进
- **实践导向**：每个学习单元都有明确的实践目标
- **原理透彻**：不仅展示"怎么做"，更要解释"为什么这样做"

### 2. 内容组织原则
- **依赖优先**：功能实现顺序严格遵循模块依赖关系
- **单元独立**：每个学习单元聚焦单一知识点，便于理解和练习
- **循环强化**：后续单元适当回顾和强化前期知识

## 教程结构规范

### 第一层级（主章节）
1. **环境搭建与项目初始化**
2. **基础架构实现**
3. **核心功能开发**
4. **高级特性实现**
5. **系统优化与部署**

### 第二层级（功能模块）
- 按照功能领域划分
- 每个模块包含 3-5 个相关功能
- 标明模块间的依赖关系

### 第三层级（学习单元）
每个学习单元应包含：
- **单元目标**：明确学习成果
- **知识点**：核心概念列表（3-5个）
- **实践任务**：具体实现目标
- **源码参考**：对应的 Dify 源码位置
- **预计时长**：学习所需时间估算

## 内容编写规范

### 1. 架构说明要求
- 提供整体架构概览图
- 解释各层职责和交互方式
- 标注关键技术选型理由
- 说明数据流向和处理逻辑

### 2. 功能覆盖要求
必须包含但不限于：
- 用户认证与授权系统
- 应用管理功能
- 对话流程处理
- workflow
- 模型集成接口
- 数据存储方案
- API 网关设计

### 3. 技术实现规范
- **框架转换**：Flask 代码统一改写为 FastAPI
- **代码风格**：遵循 Python PEP8 规范
- **设计模式**：明确标注使用的设计模式
- **最佳实践**：融入行业最佳实践

### 4. 源码映射规范
```
格式示例：
📍 源码位置：api/core/auth/authentication.py:45-78
💡 设计思路：采用 JWT 令牌机制实现无状态认证...
🔧 FastAPI 改写要点：使用 Depends 注入替代 Flask 装饰器...
```

### 5. 学习单元设计示例
```
### 3.2.1 用户认证中间件实现
- **单元目标**：实现基于 JWT 的认证中间件
- **知识点**：
  - JWT 令牌原理
  - FastAPI 依赖注入
  - 中间件设计模式
- **实践任务**：创建可复用的认证装饰器
- **源码参考**：api/core/auth/middleware.py
```

## 特殊要求

### 1. 质量保证
- 所有源码引用必须准确且存在于知识库中
- 功能实现必须经过逻辑验证
- 提供潜在问题预警和解决方案

### 2. 教学增强
- 每个模块包含"思考题"引导深入理解
- 提供"扩展阅读"链接相关知识
- 标注"易错点"帮助避免常见错误

### 3. FastAPI 迁移原则
- 保持原有业务逻辑不变
- 利用 FastAPI 特性优化性能
- 提供迁移对照表说明差异

## 输出示例格式
```
# Dify 系统教学式开发教程

## 1. 环境搭建与项目初始化
### 1.1 开发环境配置
#### 1.1.1 Python 环境准备
- 单元目标：搭建 Python 3.9+ 开发环境
- 知识点：虚拟环境、包管理、环境变量
- 源码参考：pyproject.toml, requirements.txt

### 1.2 项目结构设计
#### 1.2.1 目录结构规划
...

## 2. 基础架构实现
...
```

## 附加说明
- 优先展示 Dify 的创新设计和独特价值
- 强调实际应用场景和业务价值
- 保持内容的实用性和可操作性